# ğŸ§ª Guide de Tests API - NAO&CO Backend

## ğŸŒ URL de base
```
https://naoandco-backend-production.up.railway.app
```

## ğŸ“Š Tests de SantÃ© SystÃ¨me

### 1. Test de base
```bash
curl https://naoandco-backend-production.up.railway.app/
```
**Attendu :** Version "2.0-FINAL" + liste des features

### 2. Health Check
```bash
curl https://naoandco-backend-production.up.railway.app/health
```
**Attendu :** Status "ok" + features actives

### 3. Test Configuration
```bash
curl https://naoandco-backend-production.up.railway.app/api/config-test
```
**Attendu :** Variables trouvÃ©es + status Supabase

## ğŸ” Tests d'Authentification

### 1. Login (obtenir un token)
```bash
curl -X POST https://naoandco-backend-production.up.railway.app/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@naoandco.com","password":"test123"}'
```
**Attendu :** Token JWT + user info

### 2. VÃ©rifier le token (remplacez YOUR_TOKEN)
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://naoandco-backend-production.up.railway.app/auth/verify
```
**Attendu :** User validÃ© + expiration

## ğŸ—„ï¸ Tests Base de DonnÃ©es

### Test connexion Supabase
```bash
curl https://naoandco-backend-production.up.railway.app/api/db-test
```
**Attendu :** "Supabase connection successful!"

## ğŸ¤– Tests Assistants IA

### 1. Test configuration assistants
```bash
curl https://naoandco-backend-production.up.railway.app/api/assistant-test
```
**Attendu :** 4 assistants configurÃ©s

### 2. Question Ã  l'assistant (COLONEL EMEBI)
```bash
curl -X POST https://naoandco-backend-production.up.railway.app/assistant/ask \
  -H "Content-Type: application/json" \
  -d '{"message":"Quelles sont les formalitÃ©s pour importer du cafÃ© en France?"}'
```
**Attendu :** RÃ©ponse dÃ©taillÃ©e + cache info

### 3. Test multi-assistants
```bash
curl -X POST https://naoandco-backend-production.up.railway.app/assistant/multi \
  -H "Content-Type: application/json" \
  -d '{"message":"Quels sont les droits de douane sur le textile?"}'
```
**Attendu :** RÃ©ponses multiples + assistants disponibles

## ğŸ’¾ Tests Cache

### 1. Statistiques cache
```bash
curl https://naoandco-backend-production.up.railway.app/api/cache-stats
```
**Attendu :** Stats cache + type redis-ready

### 2. Test cache intelligent (rÃ©pÃ©ter la mÃªme question)
```bash
# PremiÃ¨re fois (lent)
curl -X POST https://naoandco-backend-production.up.railway.app/assistant/ask \
  -H "Content-Type: application/json" \
  -d '{"message":"Que faire pour importer du chocolat?"}'

# DeuxiÃ¨me fois (rapide depuis le cache)
curl -X POST https://naoandco-backend-production.up.railway.app/assistant/ask \
  -H "Content-Type: application/json" \
  -d '{"message":"Que faire pour importer du chocolat?"}'
```
**Attendu :** DeuxiÃ¨me rÃ©ponse avec "from_cache": true

## âœ… Checklist de Validation

- [ ] âœ… API rÃ©pond (status 200)
- [ ] âœ… Version 2.0-FINAL confirmÃ©e
- [ ] âœ… 6 features actives
- [ ] âœ… Login/token fonctionne
- [ ] âœ… Supabase connectÃ©
- [ ] âœ… 4 assistants configurÃ©s
- [ ] âœ… Assistant rÃ©pond aux questions
- [ ] âœ… Cache fonctionne
- [ ] âœ… Statistiques disponibles

## ğŸš¨ En cas de problÃ¨me

1. **Erreur 500** â†’ VÃ©rifier les logs Railway
2. **Timeout assistant** â†’ Normal, attendre 30s max
3. **Cache vide** â†’ Normal au dÃ©but
4. **Variables manquantes** â†’ VÃ©rifier Railway dashboard

## ğŸ“Š Performance attendue

- **RÃ©ponse API** : < 100ms
- **Assistant (cache HIT)** : < 100ms  
- **Assistant (cache MISS)** : 5-30s
- **Cache hit rate** : 50%+ aprÃ¨s quelques tests